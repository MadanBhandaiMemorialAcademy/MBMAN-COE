{% extends "base.html" %}
{% load static %}

{% block title %}BIT Curriculum - School of Science and Technology{% endblock %}

{% block content %}
<!-- HERO SECTION -->
<section class="relative bg-mbman-blue text-white py-32 overflow-hidden">
    {% if curriculum.hero_image %}
    <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: url('{{ curriculum.hero_image.url }}');"></div>
    {% endif %}
    <div class="absolute inset-0 bg-gradient-to-br from-mbman-blue/90 to-blue-900/90"></div>
    <div class="container mx-auto px-4 relative z-10 text-center">
        <i class="fas fa-code text-6xl text-blue-100 opacity-80 mb-6"></i>
        <h1 class="text-5xl md:text-6xl font-extrabold mb-4">Bachelor of Information Technology (BIT)</h1>
        <p class="text-xl text-blue-100 max-w-2xl mx-auto font-light leading-relaxed">
            {{ curriculum.duration|default:"4 Years / 8 Semesters" }}
        </p>
    </div>
</section>

<!-- CURRICULUM CONTENT SECTION -->
<section class="py-24 bg-white">
    <div class="container mx-auto px-4">
        <div class="flex flex-col lg:flex-row gap-12">

            <!-- Main Content: Overview + Semesters -->
            <div class="lg:w-2/3">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Program Overview</h2>
                {% if curriculum.overview_text %}
                <div class="text-gray-600 leading-relaxed mb-10 whitespace-pre-line">{{ curriculum.overview_text }}</div>
                {% else %}
                <p class="text-gray-600 leading-relaxed mb-6">
                    The Bachelor of Information Technology (BIT) program is designed to produce highly skilled IT professionals capable of meeting the challenges of the modern digital world. The curriculum provides a strong foundation in computer science, software development, data management, and network infrastructure.
                </p>
                <p class="text-gray-600 leading-relaxed mb-10">
                    Students will gain hands-on experience in our state-of-the-art labs and are encouraged to participate in internships and real-world projects, ensuring they are job-ready upon graduation.
                </p>
                {% endif %}

                <!-- Semester Tabs -->
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Course Structure by Semester</h3>
                <div class="w-full">
                    <!-- Tab Buttons -->
                    <div class="flex flex-wrap border-b border-gray-200">
                        {% for semester in semesters %}
                        <button class="semester-tab-btn px-6 py-3 font-semibold {% if forloop.first %}text-mbman-blue border-b-2 border-mbman-blue{% else %}text-gray-500 border-b-2 border-transparent hover:text-mbman-blue hover:border-gray-300{% endif %} transition" data-tab="sem{{ semester.semester_number }}">
                            Sem {{ semester.semester_number|upper }}
                        </button>
                        {% endfor %}
                    </div>

                    <!-- Tab Content -->
                    <div class="mt-6">
                        {% for semester in semesters %}
                        <div id="sem{{ semester.semester_number }}" class="semester-tab-content {% if not forloop.first %}hidden{% endif %} animate-fade-in">
                            {% if semester.description %}
                            <p class="text-gray-600 mb-4">{{ semester.description }}</p>
                            {% endif %}
                            {% if semester.courses.exists %}
                            <div class="overflow-x-auto rounded-lg border border-gray-200">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Code</th>
                                            <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Course Title</th>
                                            <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Credits</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-100">
                                        {% for course in semester.courses.all %}
                                        <tr class="hover:bg-gray-50 transition">
                                            <td class="px-6 py-4 text-sm font-medium text-mbman-blue">{{ course.code }}</td>
                                            <td class="px-6 py-4 text-sm text-gray-800">{{ course.title }}</td>
                                            <td class="px-6 py-4 text-center text-sm text-gray-600">{{ course.credits }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            {% else %}
                            <p class="text-gray-500 p-4 bg-gray-50 rounded-lg">Curriculum for Semester {{ semester.semester_number|upper }} is being updated.</p>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Sidebar: Career Prospects -->
            <aside class="lg:w-1/3">
                <div class="sticky top-28">
                    <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-8">
                        <h3 class="text-xl font-bold text-gray-900 mb-6">Career Prospects</h3>
                        <ul class="space-y-4">
                            {% if career_prospects %}
                                {% for career in career_prospects %}
                                <li class="flex items-start">
                                    <i class="{{ career.icon }} text-mbman-blue mr-3 mt-1 text-lg"></i>
                                    <span class="text-gray-700 leading-relaxed">{{ career.title }}</span>
                                </li>
                                {% endfor %}
                            {% else %}
                                <li class="flex items-start">
                                    <i class="fas fa-laptop-code text-mbman-blue mr-3 mt-1"></i>
                                    <span class="text-gray-700 leading-relaxed">Software Developer</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-network-wired text-mbman-blue mr-3 mt-1"></i>
                                    <span class="text-gray-700 leading-relaxed">Network Engineer</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-database text-mbman-blue mr-3 mt-1"></i>
                                    <span class="text-gray-700 leading-relaxed">Database Administrator</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-shield-alt text-mbman-blue mr-3 mt-1"></i>
                                    <span class="text-gray-700 leading-relaxed">Cybersecurity Specialist</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-brain text-mbman-blue mr-3 mt-1"></i>
                                    <span class="text-gray-700 leading-relaxed">AI/ML Engineer</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-mobile-alt text-mbman-blue mr-3 mt-1"></i>
                                    <span class="text-gray-700 leading-relaxed">Mobile App Developer</span>
                                </li>
                            {% endif %}
                        </ul>
                    </div>

                    <div class="mt-8 bg-gradient-to-br from-mbman-blue to-blue-900 rounded-2xl shadow-xl p-8 text-white">
                        <h3 class="text-xl font-bold mb-4">Ready to Apply?</h3>
                        <p class="text-blue-100 mb-6 leading-relaxed">
                            Start your journey in Information Technology with us. Apply now!
                        </p>
                        <a href="{% url 'home:index' %}#contact" class="block w-full text-center py-3 bg-white text-mbman-blue font-bold rounded-lg hover:bg-blue-50 transition shadow-lg">
                            Contact Admissions
                        </a>
                    </div>
                </div>
            </aside>

        </div>
    </div>
</section>

<script>
    // Semester Tab Switching
    document.addEventListener('DOMContentLoaded', function() {
        const tabBtns = document.querySelectorAll('.semester-tab-btn');
        const tabContents = document.querySelectorAll('.semester-tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetTab = btn.dataset.tab;

                // Remove active classes
                tabBtns.forEach(b => {
                    b.classList.remove('text-mbman-blue', 'border-mbman-blue');
                    b.classList.add('text-gray-500', 'border-transparent');
                });
                tabContents.forEach(content => content.classList.add('hidden'));

                // Add active classes
                btn.classList.add('text-mbman-blue', 'border-mbman-blue');
                btn.classList.remove('text-gray-500', 'border-transparent');
                document.getElementById(targetTab).classList.remove('hidden');
            });
        });
    });
</script>
{% endblock %}
